<DOCTYPE html>
  <html>

  <head>
    <title>Vue Demo #1: The Box App</title>
    <meta charset='utf-8' />
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <style type="text/css">
      .box {
        height: 200px;
        width: 200px;
        text-align: center;
      }

      .red {
        background-color: red;
      }

      .green {
        background-color: green;
      }
    </style>
  </head>

  <body>
    <h1>Vue Demo #1</h1>
    <div id="vapp">
      <skill-tree v-for="tree in trees" :key="tree.butcher" v-bind:tree="tree"></skill-tree>
    </div>
    <!-- Our View App goes at the end of the document -->
    <script>
      Vue.component('SkillTree', {
        template: `
          <div class="skill-tree">
            <skill-tier v-for="(skilltier, index) in tree.skilltiers" :key="index" v-bind:skilltier="skilltier"></skill-tier>
          </div>
        `,
        props: ['tree'],
        methods: {
          toggleMe() {
            this.$root.toggleBox()
          }
        },
        created: function () {
          // console.log(this.tree)
        }
      })

      Vue.component('SkillTier', {
        template: `
          <div class="skill-tier">
            <skill v-for="(skill, index) in skilltier" :key="skill.name" v-bind:skill="skill"></skill>
          </div>
        `,
        props: ['skilltier'],
        methods: {},
        created: function () {
          // console.log(this.skilltier)
        }
      })

      Vue.component('Skill', {
        template: `
          <div class="skill">
            <span class="name"> {{ skill.name }} </span>
            <span class="desc"> {{ skill.desc }} </span>
          </div>
        `,
        props: ['skill'],
        methods: {},
        created: function () {
          console.log(this.skill)
        }
      })

      const vueApp = new Vue({
        el: '#vapp',
        data: {
          display: 'redbox',
          trees: [],
          locale: {}
        },
        methods: {
          // toggleBox() {
          //   this.display == 'redbox' ? this.display = 'greenbox' : this.display = 'redbox'
          // },
          async fetchLocale(localeUrl) {
            return fetch(localeUrl).then((response) => response.json())
          },
          async fetchConfig() {
            return fetch('./config.json').then((response) => response.json())
          },
        },
        created: async function () {
          const config = await this.fetchConfig()
          this.locale = await this.fetchLocale(config.localedir)
          this.trees = config.trees
          console.log(config, this.locale)
        }
      })
    </script>
  </body>

  </html>